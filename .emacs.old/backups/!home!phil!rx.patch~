From: Eric Hanchrow <eric.hanchrow@gmail.com> Subject: [PATCH] use 'rx' most places To: phil@hagelb.org Cc: Eric Hanchrow <eric.hanchrow@gmail.com> Date: Fri,  5 Dec 2008 20:55:25 -0800  ---  starter-kit-defuns.el |    3 ++-  starter-kit-eshell.el |   11 ++++++++---  starter-kit-lisp.el   |    4 ++--  starter-kit-misc.el   |   20 ++++++++++----------  4 files changed, 22 insertions(+), 16 deletions(-)  diff --git a/starter-kit-defuns.el b/starter-kit-defuns.el index 6ec6384..40844ee 100644 --- a/starter-kit-defuns.el +++ b/starter-kit-defuns.el @@ -85,7 +85,8 @@    (defun pretty-lambdas ()    (font-lock-add-keywords -   nil `(("(?\\(lambda\\>\\)" +   nil `(((rx (opt "(") +              (group "lambda" word-end))            (0 (progn (compose-region (match-beginning 1) (match-end 1)                                      ,(make-char 'greek-iso8859-7 107))                      nil)))))) diff --git a/starter-kit-eshell.el b/starter-kit-eshell.el index 7f6020a..559a1c6 100644 --- a/starter-kit-eshell.el +++ b/starter-kit-eshell.el @@ -4,7 +4,12 @@    (setq eshell-cmpl-cycle-completions nil        eshell-save-history-on-exit t -      eshell-cmpl-dir-ignore "\\`\\(\\.\\.?\\|CVS\\|\\.svn\\|\\.git\\)/\\'") +      eshell-cmpl-dir-ignore (rx bos (or (and "." (opt ".")) +                                         "CVS" +                                         ".svn" +                                         ".git") +                                 "/" +                                 eos))    (eval-after-load 'esh-opt    '(progn @@ -18,9 +23,9 @@       (add-to-list 'eshell-visual-commands "ssh")       (add-to-list 'eshell-visual-commands "tail")       (add-to-list 'eshell-command-completions-alist -                  '("gunzip" "gz\\'")) +                  `("gunzip" ,(rx "gz" eos)))       (add-to-list 'eshell-command-completions-alist -                  '("tar" "\\(\\.tar|\\.tgz\\|\\.tar\\.gz\\)\\'")) +                  `("tar" ,(rx (group (or ".tar" ".tgz" ".tar.gz" eos)))))       (add-to-list 'eshell-output-filter-functions 'eshell-handle-ansi-color)))    (provide 'starter-kit-eshell) diff --git a/starter-kit-lisp.el b/starter-kit-lisp.el index fe71912..8a14b97 100644 --- a/starter-kit-lisp.el +++ b/starter-kit-lisp.el @@ -17,10 +17,10 @@                    (delete-file (concat buffer-file-name "c"))))))    (font-lock-add-keywords 'emacs-lisp-mode -			'(("(\\|)" . 'paren-face))) +			`((,(rx (or "(" ")"))  paren-face)))    (font-lock-add-keywords 'scheme-mode -			'(("(\\|)" . 'paren-face))) +			`((,(rx (or "(" ")"))  paren-face)))    (define-key lisp-mode-shared-map (kbd "C-c l") "lambda")   diff --git a/starter-kit-misc.el b/starter-kit-misc.el index 2b70eb3..cb9bd1b 100644 --- a/starter-kit-misc.el +++ b/starter-kit-misc.el @@ -79,16 +79,16 @@    ;; Associate modes with file extensions   -(add-to-list 'auto-mode-alist '("COMMIT_EDITMSG$" . diff-mode)) -(add-to-list 'auto-mode-alist '("\\.css$" . css-mode)) -;; (add-to-list 'auto-mode-alist '("\\.yml$" . yaml-mode)) -(add-to-list 'auto-mode-alist '("\\.rb$" . ruby-mode)) -(add-to-list 'auto-mode-alist '("Rakefile$" . ruby-mode)) -(add-to-list 'auto-mode-alist '("\\.js\\(on\\)?$" . js2-mode)) - -(add-to-list 'auto-mode-alist '("\\.xml$" . nxml-mode)) -(add-to-list 'auto-mode-alist '("\\.html$" . nxhtml-mode)) -(add-to-list 'auto-mode-alist '("\\.rhtml$" . nxhtml-mode)) +(add-to-list 'auto-mode-alist `(,(rx "COMMIT_EDITMSG" eos) diff-mode)) +(add-to-list 'auto-mode-alist `(,(rx ".css" eos) css-mode)) +;;(add-to-list 'auto-mode-alist `(,(rx ".yml" eos) yaml-mode)) +(add-to-list 'auto-mode-alist `(,(rx ".rb" eos) ruby-mode)) +(add-to-list 'auto-mode-alist `(,(rx "Rakefile" eos) ruby-mode)) +(add-to-list 'auto-mode-alist `(,(rx ".js" (? "on") eos ) js2-mode)) + +(add-to-list 'auto-mode-alist `(,(rx ".xml" eos)  . nxml-mode)) +(add-to-list 'auto-mode-alist `(,(rx ".html" eos) . nxhtml-mode)) +(add-to-list 'auto-mode-alist `(,(rx ".rhtml" eos) . nxhtml-mode))    ;; Cosmetics   --  1.6.1.rc1.35.gae26e   